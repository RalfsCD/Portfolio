/* ========= THEME & SAFE-AREA ========= */
:root{
  --mx: 0; --my: 0;

  /* iOS notch insets */
  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);

  --g1: 264 88% 60%;
  --g2: 200 92% 62%;
  --g3: 320 86% 58%;
  --g4: 42 94% 60%;

  --surface: rgba(255,255,255,0.06);
  --border: rgba(255,255,255,0.18);
  --border-strong: rgba(255,255,255,0.35);
  --text: #fff;

  --title1: hsl(var(--g1));
  --title2: hsl(var(--g2));
  --title3: hsl(var(--g3));
  --title4: hsl(var(--g4));

  /* scroll cue opacity (toggled by JS on scroll) */
  --cue-o: 1;
}
:root.theme-dark{
  --g1: 0 0% 28%;
  --g2: 0 0% 20%;
  --g3: 0 0% 14%;
  --g4: 0 0% 32%;

  --surface: rgba(255,255,255,0.05);
  --border: rgba(255,255,255,0.16);
  --border-strong: rgba(255,255,255,0.32);
  --text: #f5f5f5;

  --title1: #ffffff;
  --title2: #f2f2f2;
  --title3: #eaeaea;
  --title4: #ffffff;
}

/* ========= PAGE & BACKDROP ========= */
.page { position: relative; min-height: 100%; isolation: isolate; color: var(--text); overflow-x: clip; }
.page::before{
  content:"";
  position: fixed;
  inset: -12% -12%;
  z-index: -2;
  pointer-events: none;
  background:
    radial-gradient(1400px 900px at calc(50% + 28% * var(--mx)) calc(50% + 28% * var(--my)),
      hsl(var(--g1) / 0.35), transparent 60%),
    radial-gradient(1200px 800px at calc(50% - 30% * var(--mx)) calc(50% - 26% * var(--my)),
      hsl(var(--g2) / 0.35), transparent 60%),
    radial-gradient(1100px 720px at calc(50% + 10% * var(--mx)) calc(50% - 34% * var(--my)),
      hsl(var(--g3) / 0.30), transparent 60%),
    linear-gradient(135deg,
      hsl(var(--g1) / 0.35),
      hsl(var(--g2) / 0.35),
      hsl(var(--g3) / 0.35),
      hsl(var(--g4) / 0.35));
  background-size: 200% 200%;
  background-repeat: no-repeat;
  animation: bgShift 18s ease-in-out infinite alternate;
}
@keyframes bgShift {
  0%   { background-position: 0% 30%, 100% 70%, 30% 10%, 0% 0%; }
  50%  { background-position: 40% 60%, 60% 40%, 60% 30%, 50% 50%; }
  100% { background-position: 80% 30%, 0% 70%, 10% 80%, 100% 100%; }
}

/* ========= NAVBAR (smooth glass with pseudo-element) ========= */
.navbar{
  position: fixed; top: 0; left: 0; right: 0;
  height: calc(64px + var(--sat));
  padding-top: var(--sat);
  display: grid; place-items: center; z-index: 8;
  pointer-events: none;
}
.navbar__inner{
  width: min(1100px, 100%);
  padding: 0 clamp(16px, 5vw, 60px);
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center; gap: 12px;
  pointer-events: auto;
}
.navbar::before{
  content: "";
  position: absolute;
  inset: 0;
  z-index: -1;
  opacity: var(--glass-o, 0);
  background: linear-gradient(180deg, rgba(10,12,16,0.26), rgba(10,12,16,0.18));
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  border-bottom: 1px solid rgba(255,255,255, var(--glass-bd, 0));
  transition: opacity .28s ease;
  will-change: opacity;
}
.navbar:hover { --glass-o: 1; --glass-bd: .18; }
:root.scrolled .navbar { --glass-o: 1; --glass-bd: .18; }

.brand{
  font-weight: 900; letter-spacing: -0.02em; font-size: 18px;
  text-decoration: none; color: var(--text);
  text-shadow: 0 0 16px hsl(var(--g2) / 0.35);
}
.nav{ display: inline-flex; align-items: center; gap: clamp(12px, 3vw, 28px); justify-content: center; }
.nav__link{
  color: var(--text); text-decoration: none; font-weight: 800; letter-spacing: .2px;
  padding: 8px 10px; border-radius: 10px; border: 1px solid transparent; background: transparent;
  transition: background .2s ease, border-color .2s ease, transform .2s ease;
}
.nav__link:hover{ background: var(--surface); border-color: var(--border); transform: translateY(-1px); }

.nav-buttons{ display: inline-flex; gap: 8px; justify-self: end; }
.btn{
  --bg: var(--surface); --bd: var(--border); --tx: var(--text);
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  width: 36px; height: 36px; padding: 0;
  border-radius: 12px; border: 1px solid var(--bd);
  background: var(--bg); color: var(--tx);
  transition: transform .2s, background .2s, border-color .2s, box-shadow .2s;
  box-shadow: 0 8px 24px rgba(0,0,0,.18); backdrop-filter: blur(6px);
}
.btn:hover{ transform: translateY(-1px) scale(1.02); border-color: var(--border-strong); }
.burger{ display: none; }

/* mobile drawer uses safe-area too */
.mobile-nav{
  position: fixed; inset: calc(64px + var(--sat)) 0 auto 0;
  display: none;
  padding: 10px 16px calc(16px + var(--sab));
  background: rgba(10,12,16,.55);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(12px) saturate(120%);
  -webkit-backdrop-filter: blur(12px) saturate(120%);
  z-index: 7;
}
.mnav__link{
  display: block; color: var(--text); text-decoration: none; font-weight: 800;
  padding: 12px 8px; border-radius: 12px;
}
.mnav__link:hover{ background: var(--surface); }

/* ========= HERO ========= */
.hero{
  position: relative;
  min-height: 82dvh;
  max-width: 1100px; margin: 0 auto;
  padding: calc(64px + var(--sat) + 24px) clamp(24px, 5vw, 60px) calc(24px + var(--sab));
  display: grid; place-items: center; text-align: center;
}
.title{
  font-size: clamp(44px, 12vw, 120px);
  line-height: 1.02; font-weight: 900; letter-spacing: -0.02em; margin: 0;
  background: linear-gradient(90deg, var(--title1), var(--title2), var(--title3), var(--title4));
  background-size: 200% 100%;
  -webkit-background-clip: text; background-clip: text; color: transparent;
  animation: titleShift 8s ease-in-out infinite alternate;
  text-shadow:
    0 0 12px rgba(255,255,255,.10),
    0 0 28px rgba(255,255,255,.12);
}
@keyframes titleShift { from {background-position:0% 0%} to {background-position:100% 0%} }

/* ===== NEW: Scroll cue under title ===== */
.scroll-cue{
  position: absolute;
  bottom: clamp(14px, 4vh, 24px);
  left: 50%; transform: translateX(-50%);
  display: inline-flex; align-items: center; justify-content: center;
  width: 42px; height: 42px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.22), rgba(255,255,255,.10));
  border: 1px solid rgba(255,255,255,.28);
  box-shadow: 0 10px 26px rgba(0,0,0,.25), 0 0 32px rgba(255,255,255,.15);
  text-decoration: none; color: var(--text);
  opacity: var(--cue-o);
  animation: cueFloat 2.6s ease-in-out infinite;
  transition: opacity .28s ease, transform .2s ease, background .2s ease, border-color .2s ease;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}
.scroll-cue:hover{ transform: translateX(-50%) translateY(-2px) scale(1.04); border-color: var(--border-strong); }
@keyframes cueFloat{
  0% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(8px); }
  100% { transform: translateX(-50%) translateY(0); }
}

/* ========= SHAPES ========= */
.shapes { position: absolute; inset: -10% -10%; pointer-events: none; z-index: -1; }
.shape{
  position: absolute; transform-style: preserve-3d; will-change: transform, filter, opacity;
  background: radial-gradient(120% 120% at 30% 30%, hsl(var(--h) / 0.85), hsl(calc(var(--h) + 40deg) / 0.55) 55%, transparent 65%);
  box-shadow: 0 0 24px hsl(var(--h) / 0.25), 0 0 64px hsl(calc(var(--h) + 40deg) / 0.25);
  animation: float var(--float-dur, 18s) ease-in-out var(--float-delay, 0s) infinite alternate,
             sway calc(var(--float-dur, 18s) * 1.2) ease-in-out var(--float-delay, 0s) infinite alternate;
  transform: translate3d(0,0,0) rotate(var(--base-rot,0))
    translate(calc(16px * var(--mx) * var(--parallax,.07)), calc(16px * var(--my) * var(--parallax,.07)));
  transition: filter .25s ease, opacity .25s ease, transform .25s ease;
  mix-blend-mode: screen;
}
.shape.z1{ filter: brightness(1.05) saturate(1.1); }
.shape.z0{ filter: brightness(0.95) saturate(0.95) blur(0.5px); }
@keyframes float{ from{ transform: translate3d(0,-12px,0) rotate(var(--base-rot,0)); } to{ transform: translate3d(0,16px,0) rotate(calc(var(--base-rot,0) + 10deg)); } }
@keyframes sway { from{ margin-left:-6px; } to{ margin-left:6px; } }
@media (pointer:fine){
  .shapes{ pointer-events:auto; }
  .shape{ cursor:pointer; }
  .shape:hover{
    transform: translate3d(0,0,0) rotate(calc(var(--base-rot,0) + 25deg))
      translate(calc(52px * var(--mx) * var(--parallax,.07)), calc(52px * var(--my) * var(--parallax,.07))) scale(1.35);
    filter: hue-rotate(40deg) saturate(1.35) brightness(1.08); opacity:.95;
  }
}

/* ========= TIMELINE SPINE ========= */
.timeline{
  position: relative;
  max-width: 1100px;
  margin: 0 auto;
}
/* vertical rail (glass-ish) */
.timeline::before{
  content:"";
  position: absolute;
  top: 0; bottom: 0;
  left: clamp(16px, 5vw, 40px);
  width: 2px;
  background:
    linear-gradient(to bottom,
      rgba(255,255,255,.32),
      rgba(255,255,255,.12));
  border-radius: 2px;
  filter: drop-shadow(0 0 10px rgba(255,255,255,.12));
}

/* dots for each section (aligned to rail) */
.section{
  position: relative;
  z-index: 0;
  max-width: 1100px;
  margin: 0 auto;
  padding: clamp(24px, 6vw, 80px) clamp(16px, 5vw, 60px);
  scroll-margin-top: calc(80px + var(--sat));
}
.section::before{
  content:"";
  position: absolute;
  left: calc(clamp(16px, 5vw, 40px) - 6px);
  top: clamp(24px, 6vw, 80px);
  width: 12px; height: 12px; border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.95), rgba(255,255,255,.65));
  box-shadow:
    0 0 0 2px rgba(255,255,255,.18),
    0 4px 18px rgba(0,0,0,.25),
    0 0 28px rgba(255,255,255,.25);
}

/* section headings/content */
.section__title{
  margin: 0 0 12px; font-size: clamp(22px, 7vw, 36px); font-weight: 900;
  letter-spacing: .2px; color: var(--text);
  text-shadow: 0 0 20px hsl(var(--g1) / 0.25);
}
.section-about .about-text{ margin: 8px 0 0; max-width: 70ch; color: rgba(255,255,255,.88); }

/* Projects placeholder */
.section-head{ display:flex; align-items:center; gap:10px; }
.badge.soon{ font-size:12px; font-weight:800; padding:4px 8px; border-radius:999px; border:1px solid var(--border); background:var(--surface); }
.projects-grid{ margin-top:12px; display:grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap:14px; }
.project-card{ border:1px solid var(--border); background:var(--surface); border-radius:14px; padding:12px; min-height:150px; overflow:hidden; position:relative; }
.skeleton .skel-thumb{ height:92px; border-radius:10px; background:linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,.12), rgba(255,255,255,.06)); background-size:200% 100%; animation:shimmer 1.8s linear infinite; }
.skeleton .skel-lines{ margin-top:12px; display:grid; gap:8px; }
.skeleton .skel-line{ height:10px; border-radius:6px; background:linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,.12), rgba(255,255,255,.06)); background-size:200% 100%; animation:shimmer 1.8s linear infinite; }
.skeleton .skel-line.short{ width:60%; }
@keyframes shimmer{ 0%{ background-position:0% 0%; } 100%{ background-position:200% 0%; } }
.projects-note{ margin-top:10px; opacity:.9; }

/* Contacts */
.section-kontakti{ display:grid; align-content:start; gap:22px; }
.contact-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap:14px; }
.contact-item{
  display:flex; align-items:center; gap:12px; padding:16px 18px;
  border-radius:14px; border:1px solid var(--border); background:var(--surface);
  color:var(--text); text-decoration:none; transition: transform .18s, border-color .18s, box-shadow .18s, background .18s;
  backdrop-filter: blur(6px);
}
.contact-item:hover{ transform: translateY(-1px); border-color: var(--border-strong); box-shadow: 0 10px 26px rgba(0,0,0,.25), 0 0 36px hsl(var(--g3) / 0.25); }
.icon{ flex:0 0 auto; display:inline-block; vertical-align:middle; filter: drop-shadow(0 0 6px rgba(0,0,0,.2)); }
.contact-text{ font-weight:800; letter-spacing:.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Soft vignette */
.vignette{
  position: fixed; inset: 0; pointer-events: none;
  background:
    radial-gradient(1200px 800px at 50% 50%, transparent 40%, rgba(0,0,0,0.25) 75%),
    radial-gradient(250px 250px at calc(50% + 35% * var(--mx)) calc(50% + 35% * var(--my)), rgba(0,0,0,0.18), transparent 55%);
  z-index: -1;
}

/* ========= MOBILE TWEAKS ========= */
@media (max-width: 720px){
  .navbar{ height: calc(56px + var(--sat)); }
  .mobile-nav{ inset: calc(56px + var(--sat)) 0 auto 0; }

  .nav{ display: none; }
  .burger{ display: inline-flex; }

  .hero{
    min-height: 68dvh;
    padding: calc(56px + var(--sat) + 18px) 16px calc(18px + var(--sab));
  }
  .title{
    font-size: clamp(40px, 12vw, 72px);
    text-shadow: 0 0 10px rgba(255,255,255,.12), 0 0 26px rgba(255,255,255,.16);
  }

  .section{
    padding: 24px 16px;
    scroll-margin-top: calc(68px + var(--sat));
  }
  .contact-grid{ grid-template-columns: 1fr; }
}

/* show mobile drawer when open */
:root.navopen .mobile-nav{ display: block; }
